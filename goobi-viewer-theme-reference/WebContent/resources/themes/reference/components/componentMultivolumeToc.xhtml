<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:composite="http://xmlns.jcp.org/jsf/composite"
      xmlns:viewerComponent="http://xmlns.jcp.org/jsf/composite/components" 
      xmlns:widgetComponent="http://xmlns.jcp.org/jsf/composite/components/widgets"
      xmlns:templateComponent="http://xmlns.jcp.org/jsf/composite/themes/bsz/components">

	<composite:interface>
		<composite:attribute name="toc" required="true" />
	</composite:interface>

	<composite:implementation>
		<div class="toc">
			<h:form id="tocForm" prependId="false">
				<!-- MULTI VOLUME TOC -->
					<div class="toc__multi-volume">
						<ui:repeat var="group" value="#{cc.attrs.toc.groupNames}">
							<!-- MV GROUP -->
							<h:panelGroup rendered="#{group != '_DEFAULT'}">
								<div class="toc__mv-group">
									<h4>
										<button type="button" class="btn-clean" data-toggle="mv-element">
											<span></span>
										</button>
										#{msg[group]}
									</h4>
								</div>

								<!-- MV ELEMENT -->
								<ui:repeat var="tocElement" value="#{cc.attrs.toc.getTreeViewForGroup(group)}">
									<div class="toc__mv-element level-#{tocElement.level}">
										<h:panelGroup rendered="#{tocElement.pageNo == null}">
											<h4>#{tocElement.label}</h4>
										</h:panelGroup>

										<div class="row">
											<div class="col-xs-12 col-sm-8 col-md-9">
												<!-- MV TITLE -->
												<h:panelGroup rendered="#{tocElement.label != null and tocElement.pageNo != null}">
													<div class="toc__mv-element-title">
														<a href="#{tocElement.url}" title="#{tocElement.label}">#{tocElement.label}</a>
													</div>
												</h:panelGroup>
											</div>
											<div class="col-xs-6 col-sm-2">
												<!-- MV GROUPLINK -->
												<h:panelGroup rendered="#{activeDocumentBean.anchor and fn:length(tocElement.groupIds) > 0}">
													<div class="toc__mv-element-link text-right">
														<ui:repeat var="groupId" value="#{tocElement.groupIds}">
															<h:outputLink value="#{navigationHelper.tocUrl}/#{groupId}/1/" target="_blank">
																<h:outputText value="#{msg.convolutePart}" />
															</h:outputLink>
														</ui:repeat>
													</div>
												</h:panelGroup>
											</div>
											<div class="col-xs-6 col-sm-2 col-md-1">
												<!-- MV IMAGE -->
												<div class="toc__mv-element-img text-center">
													<h:outputLink rendered="#{tocElement.thumbnailUrl != null and configurationBean.showThumbnailsInToc()}" value="#{tocElement.url}">
														<img src="#{tocElement.thumbnailUrl}" class="img-responsive" alt="#{tocElement.label}" />
													</h:outputLink>
												</div>
											</div>
										</div>
									</div>
								</ui:repeat>
							</h:panelGroup>

							<!-- MV FLAT -->
							<h:panelGroup rendered="#{group == '_DEFAULT'}">
								<!-- MV ELEMENT -->
								<ui:repeat var="tocElement" value="#{cc.attrs.toc.flatView}">
									<div class="toc__mv-element level-#{tocElement.level}">
										<h:panelGroup rendered="#{tocElement.pageNo == null}">
											<h4>#{tocElement.label}</h4>
										</h:panelGroup>

										<div class="row">
											<div class="col-xs-6 col-sm-8 col-md-9">
												<!-- MV TITLE -->
												<h:panelGroup rendered="#{tocElement.label != null and tocElement.pageNo != null}">
													<div class="toc__mv-element-title">
														<a href="#{tocElement.url}" title="#{tocElement.label}">#{tocElement.label}</a>
													</div>
												</h:panelGroup>
											</div>
											<div class="col-xs-6 col-sm-2">
												<!-- MV GROUPLINK -->
												<h:panelGroup rendered="#{fn:length(tocElement.groupIds) > 0}">
													<div class="toc__mv-element-link text-right">
														<ui:repeat var="groupId" value="#{tocElement.groupIds}">
															<h:outputLink value="#{navigationHelper.tocUrl}/#{groupId}/1/" target="_blank">
																<h:outputText value="#{msg.convolutePart}" />
															</h:outputLink>
														</ui:repeat>
													</div>
												</h:panelGroup>
											</div>
											<div class="col-xs-6 col-sm-2 col-md-1">
												<!-- MV IMAGE -->
												<div class="toc__mv-element-img text-center">
													<h:outputLink rendered="#{tocElement.thumbnailUrl != null and configurationBean.showThumbnailsInToc()}" value="#{tocElement.url}">
														<img src="#{tocElement.thumbnailUrl}" class="img-responsive" alt="#{tocElement.label}" />
													</h:outputLink>
												</div>
											</div>
										</div>
									</div>
								</ui:repeat>
							</h:panelGroup>
						</ui:repeat>

<!-- 						<viewerComponent:simplePaginator  -->
<!-- 							itemCount="#{cc.attrs.toc.numPages}"  -->
<!-- 							itemActive="#{cc.attrs.toc.currentPage}"  -->
<!-- 							urlPrefix="#{navigationHelper.tocUrl}/#{cc.attrs.pi}/"  -->
<!-- 							urlSuffix="" /> -->
					</div>
			</h:form>
		</div>
	</composite:implementation>
</ui:composition>
